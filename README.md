# 1C:CKEditor

Конфигурация для встраивания WYSIWYG HTML-редактора в решения на базе 1С:Предприятие.

За основу быт взят [CKEditor 4](https://github.com/ckeditor/ckeditor4)

## Подключение формы для редактирования

#### Вызов общей формы CKEditor

``` 1С:Enterprise
&НаКлиенте
Процедура ОписаниеКраткоеНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	CKEditorКлиент.ПоказатьФормуРедактирования(
		Новый ОписаниеОповещения("ПослеВводаОписания", ЭтаФорма, Новый Структура("Краткое", Истина)),
		Объект.ОписаниеКраткое,
		НСтр("ru = 'Краткое описание'"));
	
КонецПроцедуры
```

#### Обработка результата

``` 1С:Enterprise
&НаКлиенте
Процедура ПослеВводаОписания(Результат, ДополнительныеПараметры) Экспорт
	
	Если Результат <> Неопределено Тогда
		Если ДополнительныеПараметры.Свойство("Краткое") Тогда
			Если ДополнительныеПараметры.Краткое Тогда
				Объект.ОписаниеКраткое = Результат;
			Иначе
				Объект.Описание = Результат;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры
```

## Размещение на форме

#### Подключение

Необходимо добавить реквизит формы (тип Строка) и соответствующий элемент формы (Поле HTML-документа). Имя элемента должно начинаться с "CKEditor"

В событие формы "ПриСозданииНаСервере" добавить код
``` 1С:Enterprise
CKEditor.ПриСозданииНаСервере(ЭтаФорма);
```

#### Установка контента для редактирования
Для установки текста предусмотрен метод (клиентский) 
``` 1С:Enterprise
CKEditorКлиент.УстановитьКонтент(ЭлементФормы, Текст)
```

Если необходимо при открытии формы заполнить контент, можно воспользоваться событием "ДокументСформирован" Поля HTML-документа 
``` 1С:Enterprise
&НаКлиенте
Процедура CKEditor_ПолеHTMLДокументСформирован(Элемент)
	
	CKEditorКлиент.УстановитьКонтент(Элементы.CKEditor_ПолеHTML, Текст);
	
КонецПроцедуры
```

#### Результат редактирования
``` 1С:Enterprise
CKEditorКлиент.ПолучитьКонтент(Элементы.CKEditor_ПолеHTML)
```

